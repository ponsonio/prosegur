<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich" template="layout/template.xhtml">

	<ui:define name="body">

		<h:form id="buscarLog">

			<script type="text/javascript">
			  </script>

			<f:facet name="header"><h:outputText value="#{messages['label.tituloAnulacion']}"/></f:facet>

				<h3 align="center">#{messages['label.titulo.busquedaLog']}</h3>
					

						           <s:decorate id="fechadesde" template="layout/edit.xhtml">
						                <ui:define name="label">#{messages['label.fechaDesde']}</ui:define>
												<rich:calendar id="fechadesde" value="#{busquedaLogBO.fechaDesde}"   />
							      </s:decorate>			                
							
						           <s:decorate id="fechahasta" template="layout/edit.xhtml">
						                <ui:define name="label">#{messages['label.fechaHasta']}</ui:define>
												<rich:calendar id="fechahasta" value="#{busquedaLogBO.fechaHasta}"   />
							      </s:decorate>	

                				<s:decorate id="tipoBusqueda" template="layout/edit.xhtml">
						                <ui:define name="label">#{messages['label.selecionar']}</ui:define>
						                
						                <h:selectOneMenu  id="tipoServicio"  value="#{busquedaLogBO.tipoEventoBusqueda}">
						                	<f:selectItem itemLabel="Todos" itemValue="Todos" />
						                	<f:selectItem itemLabel="Evento" itemValue="EVENTO" />
						                	<f:selectItem itemLabel="Error" itemValue="ERROR" />
						                	<f:selectItem itemLabel="Aviso" itemValue="AVISO" />
						                	<f:selectItem itemLabel="Info" itemValue="INFO" />
						                </h:selectOneMenu>
							      </s:decorate>	


					            <s:decorate id="usuarioBusqueda" template="layout/edit.xhtml">
					                <ui:define name="label">#{messages['label.usuario']}</ui:define>
					                <h:inputText id="usuarioBusqueda"
					                       required="false"
					                          value="#{busquedaLogBO.usuarioBusqueda}">
					                </h:inputText>
					            </s:decorate>

					            <s:decorate id="mensajeBusqueda" template="layout/edit.xhtml">
					                <ui:define name="label">#{messages['label.descripcion']}</ui:define>
					                <h:inputText id="mensajeBusqueda"
					                       required="false"
					                          value="#{busquedaLogBO.mensajeBusqueda}">
					                </h:inputText>
					            </s:decorate>

					            <s:decorate id="referenciaBusqueda" template="layout/edit.xhtml">
					                <ui:define name="label">#{messages['label.referencia']}</ui:define>
					                <h:inputText id="referenciaBusqueda"
					                       required="false"
					                          value="#{busquedaLogBO.referenciaBusqueda}">
					                </h:inputText>
					            </s:decorate>

					            <s:decorate id="operacionBusqueda" template="layout/edit.xhtml">
					                <ui:define name="label">#{messages['label.operacion']}</ui:define>
					                <h:inputText id="operacionBusqueda"
					                       required="false"
					                          value="#{busquedaLogBO.operacionBusqueda}">
					                </h:inputText>
					            </s:decorate>
					            			            
					            <s:decorate id="ipBusqueda" template="layout/edit.xhtml">
					                <ui:define name="label">#{messages['label.ip']}</ui:define>
					                <h:inputText id="ipBusqueda"
					                       required="false"
					                          value="#{busquedaLogBO.ipBusqueda}">
					                </h:inputText>
					            </s:decorate>


									<h:commandButton id="buscarCodigo" value="Buscar"
												action="#{busquedaLogBO.buscarLog()}" />	
				
							        <div style="clear:both"/>
	
    			
    			<rich:panel>			

					<rich:dataTable value="#{busquedaLogBO.listLog}"
						rendered="#{busquedaLogBO.listLog.size>0}" var="sdmLog" id="tableLog">

						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{messages['label.id']}" />
							</f:facet>
							<h:outputText value="#{sdmLog.id}" id="id" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{messages['label.tipo']}" />
							</f:facet>
							<h:outputText value="#{sdmLog.tipo}" id="tipo" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{messages['label.fecha']}" />
							</f:facet>
							<h:outputText value="#{sdmLog.fecha}" id="fecha">
								<f:convertDateTime pattern="d/M/yyyy HH:mm:ss" />
							 </h:outputText>	
						</rich:column>

						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{messages['label.usuario']}" />
							</f:facet>
							<h:outputText value="#{sdmLog.usuario}" id="usuario" />
						</rich:column>

						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{messages['label.ip']}" />
							</f:facet>
							<h:outputText value="#{sdmLog.ip}" id="ip"   />
						</rich:column>
						
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{messages['label.operacion']}" />
							</f:facet>
							<h:outputText value="#{sdmLog.operacion}" id="operacion"   />
						</rich:column>
						
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{messages['label.descripcion']}" />
							</f:facet>
							<h:outputText value="#{sdmLog.mensaje}" id="mensaje"   />
						</rich:column>
						
						<rich:column>
							<f:facet name="header">
								<h:outputText value="#{messages['label.referencia']}" />
							</f:facet>
							<h:outputText value="#{sdmLog.referencia}" id="referencia"   />
						</rich:column>
						
					</rich:dataTable>
					
					<h:commandLink value="Excel" 
						action="#{org.jboss.seam.excel.exporter.excelExporter.export('buscarLog:tableLog')}" />
			        
			        <div style="clear:both"/>

    			</rich:panel>
    			
		</h:form>
	</ui:define>
</ui:composition>    			